---
import "@/styles/global.css";

interface Props {
  title: string;
  description?: string;
  image?: string;
  fullWidth?: boolean;
}

const { 
  title, 
  description = "Juega a los mejores minijuegos clásicos online: Tetris, Snake, Buscaminas y más. Diversión gratuita en tu navegador.", 
  image = "/images/og-image.webp",
  fullWidth = false 
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.webp" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- SEO Principal -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(image, Astro.url)} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={new URL(image, Astro.url)} />

    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3615553983953486"
      crossorigin="anonymous"></script>
      <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
</script>
  </head>
  <body class="min-h-screen w-full flex flex-col relative">
    <amp-auto-ads type="adsense"
        data-ad-client="ca-pub-3615553983953486">
</amp-auto-ads>
    
    <!-- Mobile Incompatibility Overlay -->
    <div class="fixed inset-0 z-50 bg-gray-900 text-white flex flex-col items-center justify-center p-8 text-center lg:hidden">
      <span class="icon-[mdi--monitor-cellphone] text-6xl mb-6 text-red-500"></span>
      <h1 class="text-3xl font-bold mb-4">Dispositivo No Compatible</h1>
      <p class="text-lg text-gray-300">
        Lo sentimos, MiniPlayers está diseñado para ofrecer la mejor experiencia en ordenadores.
      </p>
      <p class="text-lg text-gray-300 mt-2">
        Por favor, accede desde un PC o portátil para disfrutar de nuestros juegos.
      </p>
    </div>
    <header class="absolute top-0 w-full flex justify-center">
      <nav class="max-w-[900px] w-full flex justify-between items-center py-2">
        <a href="/" class="flex gap-6 items-center justify-center">
          <img src="/images/logo.webp" alt="Mini Players" class="w-14 h-14" />
          <h1 class="text-3xl">Bienvenido a Mini Players</h1>
        </a>
        <div class="relative w-[300px]">
          <div
            class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none"
          >
            <span class="icon-[material-symbols--search]"></span>
          </div>
          <input
            type="text"
            id="input-group-1"
            class="h-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
            placeholder="Buscar"
            onkeydown="if(event.key==='Enter'){window.location.href='/?search='+encodeURIComponent(this.value);}"
            value={new URLSearchParams(Astro.url.search).get("search") ?? ""}
          />
        </div>
      </nav>
    </header>
    <section class={fullWidth ? "w-full flex-grow pt-20" : "grid grid-cols-[1fr_4fr_1fr] w-full flex-grow p-20 pt-28"}>
      {!fullWidth && (
      <aside>
        <script
          async
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3615553983953486"
          crossorigin="anonymous"></script>
        <!-- Banner Vertical 1 -->
        <ins
          class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-3615553983953486"
          data-ad-slot="6851332810"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
        <script defer>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </aside>
      )}

      <main
        class="flex justify-center items-center"
      >
        <slot />
      </main>
      
      {!fullWidth && (
      <aside>
        <script
          async
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3615553983953486"
          crossorigin="anonymous"></script>
        <!-- Banner Vertical 2 -->
        <ins
          class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-3615553983953486"
          data-ad-slot="9285924461"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
        <script defer>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </aside>
      )}
    </section>
    <footer
      class="w-full justify-center items-center p-6 h-18 bg-gray-900 text-white mt-auto"
    >
      <div class="flex items-center gap-4 justify-between w-full">
        <div class="flex flex-wrap justify-center gap-4 text-sm text-gray-400">
          <a href="/about" class="hover:text-white transition">Sobre Nosotros</a>
          <a href="/contact" class="hover:text-white transition">Contacto</a>
          <a href="/privacy" class="hover:text-white transition">Política de Privacidad</a>
          <a href="/terms" class="hover:text-white transition">Términos y Condiciones</a>
        </div>
        
        <div class="flex items-center gap-4">
          <span class="text-sm text-gray-500">
            © {new Date().getFullYear()} MiniPlayers
          </span>
          <div class="flex gap-4">
            <a
              href="https://github.com/Mininh1206/mini-players"
              class="text-gray-400 hover:text-white transition"
              target="_blank"
              aria-label="GitHub Project"
            >
              <span class="icon-[mdi--github] text-xl"></span>
            </a>
            <a
              href="https://www.linkedin.com/in/daniel-marchena-jim%C3%A9nez/"
              class="text-gray-400 hover:text-white transition"
              target="_blank"
              aria-label="LinkedIn Profile"
            >
              <span class="icon-[mdi--linkedin] text-xl"></span>
            </a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
